<!DOCTYPE html>
<!--
Copyright 2021 Canonical Ltd.  This software is licensed under the
GNU Affero General Public License version 3 (see the file LICENSE).
-->

<html>
  <head>
      <title>Test message edit</title>

      <!-- YUI and test setup -->
      <script type="text/javascript"
              src="../../../../../../build/js/yui/yui/yui.js">
      </script>
      <link rel="stylesheet"
      href="../../../../../../build/js/yui/console/assets/console-core.css" />
      <link rel="stylesheet"
      href="../../../../../../build/js/yui/test-console/assets/skins/sam/test-console.css" />

      <script type="text/javascript"
              src="../../../../../../build/js/lp/app/testing/testrunner.js"></script>

      <link rel="stylesheet"
            href="../../../../app/javascript/testing/test.css" />

      <!-- Dependencies -->
      <script type="text/javascript"
          src="../../../../../../build/js/lp/app/client.js"></script>
      <script type="text/javascript"
          src="../../../../../../build/js/lp/app/lp.js"></script>
      <script type="text/javascript"
          src="../../../../../../build/js/lp/app/anim/anim.js"></script>
      <script type="text/javascript"
          src="../../../../../../build/js/lp/app/extras/extras.js"></script>
      <script type="text/javascript"
          src="../../../../../../build/js/lp/app/testing/mockio.js"></script>

      <!-- The module under test. -->
      <script type="text/javascript" src="../messages.edit.js"></script>

      <!-- Any css assert for this module. -->
      <!-- <link rel="stylesheet" href="../assets/archive-packages-core.css" /> -->

      <!-- The test suite. -->
      <script type="text/javascript" src="test_messages.edit.js"></script>

    </head>
    <body class="yui3-skin-sam">
        <ul id="suites">
            <li>lp.services.messages.edit.test</li>
        </ul>

        <!-- First editable message -->
        <div class="editable-message" id="first-message"
             data-baseurl="/message/1" data-i-can-edit="True">
            <!-- Revision list container and its template -->
            <div class="message-revision-container">
              <!-- The revision list pop-up header, with the image that closes
              the pop-up when clicked. -->
              <div class="message-revision-container-header">
                <span>Revision history for this message</span>
                <img src="/+icing/build/overlay/assets/skins/sam/images/close.gif"
                     class="message-revision-close"/>
              </div>
              <!-- The template for each revision item in the list. The
              content of this tag will be repeated multiple times, replacing
               the {variable} with each MessageRevision entry returned by
               the API.
               -->
              <script type="text/template">
                <div class='message-revision-item'>
                  <!-- The description of the revision, that will expand the
                   revision content once clicked. -->
                  <div class='message-revision-title'>
                      <a class="sprite remove action-icon message-revision-del-btn">
                          Remove
                      </a>
                      <a class="js-action">Revision #{revision}, created at {date_created_display}</a>
                  </div>
                  <!-- The revision content itself -->
                  <div class='message-revision-body'>{content}</div>
                </div>
              </script>
              <!-- This is the place where all the revisions will be placed,
               by applying the above template to each MessageRevision entry
               returned by the API.
               -->
              <div class="message-revision-list"></div>
            </div>

            <!-- Message body -->
            <div>
                Comment from @some-user a while ago
                                Comment from @some-user a while ago
                <span class="editable-message-last-edit-date">:</span>
            </div>
            <div class="editable-message-body">
                <div class="editable-message-text"></div>
                The message is above :)
            </div>
            <img class="sprite edit action-icon editable-message-edit-btn" />
            <img class="sprite remove action-icon editable-message-delete-btn" />

            <div class="editable-message-form">
                <textarea></textarea>
                <input type="button" value="Update" class="editable-message-update-btn" />
                <input type="button" value="Cancel" class="editable-message-cancel-btn" />
            </div>
        </div>

        <!-- Second editable message -->
        <div class="editable-message" id="second-message"
             data-baseurl="/message/2" data-i-can-edit="True">
            <!-- Revision list container and its template -->
            <div class="message-revision-container">
              <div class="message-revision-container-header">
                <span>Revision history for this message</span>
                <img src="/+icing/build/overlay/assets/skins/sam/images/close.gif"
                     class="message-revision-close"/>
              </div>
              <script type="text/template">
                <div class='message-revision-item'>
                  <div class='message-revision-title'>
                      <a class="sprite remove action-icon message-revision-del-btn">
                          Remove
                      </a>
                      <a class="js-action">Revision #{revision}, created at {date_created_display}</a>
                  </div>
                  <div class='message-revision-body'>{content}</div>
                </div>
              </script>
              <div class="message-revision-list"></div>
            </div>

            <!-- Message body -->
            <div>
                Comment from @some-user a while ago
                <span class="editable-message-last-edit-date">
                    <a href="#" class="editable-message-last-edit-link">
                        (last edit 5 minutes ago):
                    </a>
                </span>
            </div>
            <div class="editable-message-body">
                <div class="editable-message-text"></div>
                The message is above :)
            </div>
            <img class="sprite edit action-icon editable-message-edit-btn" />
            <img class="sprite remove action-icon editable-message-delete-btn" />

            <div class="editable-message-form">
                <textarea></textarea>
                <input type="button" value="Update" class="editable-message-update-btn" />
                <input type="button" value="Cancel" class="editable-message-cancel-btn" />
            </div>
        </div>

        <!-- A deleted message may not define all tags.
        Let's add one of those deleted messages here to make sure that
        Y.lp.services.messages.edit.setup() will not crash. -->
        <div class="editable-message" id="deleted-message"
             data-baseurl="/message/2">
            Deleted msg.
        </div>

    </body>
</html>
